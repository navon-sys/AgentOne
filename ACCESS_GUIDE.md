# üåê Access Guide - Public IP Configuration

## Application URLs

The AI Interview Platform is now configured to be accessible via the public IP address.

### üîó Public Access URLs

**Frontend (React App):**
- **Public URL**: http://20.82.140.166:5173
- **Local URL**: http://localhost:5173

**Backend API:**
- **Public URL**: http://20.82.140.166:3001
- **Local URL**: http://localhost:3001
- **Health Check**: http://20.82.140.166:3001/api/health

---

## üöÄ Starting the Application

### Terminal 1 - Backend Server
```bash
cd /home/azureuser/webapp
npm run server
```

Expected output:
```
üöÄ Backend server running on http://20.82.140.166:3001
üåê Also accessible at http://localhost:3001
```

### Terminal 2 - Frontend Server
```bash
cd /home/azureuser/webapp
npm run dev
```

Expected output:
```
VITE ready in xxx ms

‚ûú  Local:   http://localhost:5173/
‚ûú  Network: http://20.82.140.166:5173/
```

---

## üîß Configuration

The application uses environment variables to determine API URLs:

### .env Configuration
```env
# Backend will be accessible at
VITE_API_URL=http://20.82.140.166:3001

# Or if testing locally only
# VITE_API_URL=http://localhost:3001
```

### Automatic Fallback

If `VITE_API_URL` is not set, the application automatically falls back to:
- **Production**: `http://20.82.140.166:3001`
- **Development**: Uses environment variable or fallback

---

## üåç External Access

### For Remote Users

Share these URLs with users who need to access the application:

1. **HR Staff**:
   - URL: http://20.82.140.166:5173
   - They can sign up and manage interviews

2. **Candidates**:
   - They receive unique links generated by HR
   - Example: http://20.82.140.166:5173?token=xxxxx

### Firewall Requirements

Ensure these ports are open in your firewall:
- **Port 5173** - Frontend (Vite dev server)
- **Port 3001** - Backend (Express API)

#### Azure VM Port Configuration
```bash
# Check if ports are open
sudo ufw status

# If UFW is active, open the ports
sudo ufw allow 5173/tcp
sudo ufw allow 3001/tcp
```

#### Azure Portal Port Configuration
1. Go to Azure Portal
2. Navigate to your VM
3. Go to **Networking** ‚Üí **Inbound port rules**
4. Add rules:
   - Port 5173 (Frontend)
   - Port 3001 (Backend)

---

## üîç Testing Connectivity

### Test Backend API
```bash
curl http://20.82.140.166:3001/api/health
```

Expected response:
```json
{
  "status": "ok",
  "services": {
    "livekit": false,
    "deepgram": false,
    "openai": false
  }
}
```

### Test Frontend
Open in browser:
```
http://20.82.140.166:5173
```

You should see the login page.

---

## üîê Security Notes

### Production Deployment

For production use, consider:

1. **HTTPS**: Use a reverse proxy (nginx) with SSL certificate
2. **Domain Name**: Point a domain to your IP
3. **Firewall**: Restrict access to specific IPs if needed
4. **Environment Variables**: Use proper .env files (not .env.example)

### Example nginx Configuration
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:5173;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    location /api {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## üì± Mobile Access

The application is responsive and can be accessed from mobile devices:

```
http://20.82.140.166:5173
```

Make sure mobile devices are on a network that can reach the public IP.

---

## üêõ Troubleshooting

### Cannot Access from External Network

1. **Check if servers are running**:
   ```bash
   ps aux | grep node
   ```

2. **Check if ports are listening on all interfaces**:
   ```bash
   netstat -tuln | grep -E '3001|5173'
   ```
   
   Should show `0.0.0.0:3001` and `0.0.0.0:5173`

3. **Check firewall**:
   ```bash
   sudo ufw status
   ```

4. **Test from server itself**:
   ```bash
   curl http://localhost:3001/api/health
   curl http://localhost:5173
   ```

### API Calls Failing

1. **Check CORS**: Backend has CORS enabled by default
2. **Check .env**: Ensure `VITE_API_URL` is set correctly
3. **Check browser console**: Look for network errors
4. **Verify backend is running**: Visit http://20.82.140.166:3001/api/health

### Connection Refused

If you see "Connection refused":

1. **Backend not running**: Start with `npm run server`
2. **Port not open**: Check firewall rules
3. **Wrong IP**: Verify the public IP is correct
4. **Server binding**: Ensure server listens on `0.0.0.0` not `127.0.0.1`

---

## üìä Network Configuration Summary

| Service | Bind Address | Port | External URL |
|---------|--------------|------|--------------|
| Backend | 0.0.0.0 | 3001 | http://20.82.140.166:3001 |
| Frontend | 0.0.0.0 | 5173 | http://20.82.140.166:5173 |
| LiveKit | TBD | 7880 | ws://20.82.140.166:7880 |

---

## ‚úÖ Verification Checklist

Before sharing with users:

- [ ] Backend server running and accessible
- [ ] Frontend server running and accessible
- [ ] Health check endpoint returns success
- [ ] Firewall ports are open (5173, 3001)
- [ ] Can access from external network
- [ ] Environment variables configured
- [ ] Database (Supabase) is set up
- [ ] API keys are configured (optional for basic testing)

---

## üéØ Quick Access Summary

For easy reference, save these URLs:

```
Frontend:  http://20.82.140.166:5173
Backend:   http://20.82.140.166:3001
Health:    http://20.82.140.166:3001/api/health
```

Share the frontend URL with your team and candidates!

---

*Last Updated: Configuration set for public IP 20.82.140.166*
